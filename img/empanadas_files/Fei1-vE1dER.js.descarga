if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("PolarisCSSTransition.react",["PolarisTransition.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react");function i(a){return typeof a==="string"?{enter:a+"-enter",enterActive:a+"-enter-active",exit:a+"-exit",exitActive:a+"-exit-active"}:a}a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.state=c.$1(),c.$4=function(){c.$5(d("PolarisTransition.react").TRANSITION_STATUS.ENTERING,c.props.onEntering)},c.$6=function(){c.$5(d("PolarisTransition.react").TRANSITION_STATUS.ENTERED,c.props.onEntered)},c.$7=function(){c.$5(d("PolarisTransition.react").TRANSITION_STATUS.EXITING,c.props.onExiting)},c.$8=function(){c.$5(d("PolarisTransition.react").TRANSITION_STATUS.EXITED,c.props.onExited)},b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.componentDidMount=function(){this.props.appear&&this.$2()};c.componentDidUpdate=function(){this.$2()};c.componentWillUnmount=function(){this.timeoutID!=null&&window.clearTimeout(this.timeoutID)};c.$3=function(){var a=this.props.classNames;a=i(a);var b=this.state,c=b.active;b=b.status;var e=[];b===d("PolarisTransition.react").TRANSITION_STATUS.ENTERING?(a.enter!=null&&e.push(a.enter),c&&a.enterActive!=null&&e.push(a.enterActive)):b===d("PolarisTransition.react").TRANSITION_STATUS.EXITING&&(a.exit!=null&&e.push(a.exit),c&&a.exitActive!=null&&e.push(a.exitActive));return e};c.$1=function(){var a=this.props;a=a["in"]?a.appear?d("PolarisTransition.react").TRANSITION_STATUS.ENTERING:d("PolarisTransition.react").TRANSITION_STATUS.ENTERED:d("PolarisTransition.react").TRANSITION_STATUS.EXITED;return{active:!1,status:a}};c.$2=function(){var a=this;!this.state.active&&(this.state.status===d("PolarisTransition.react").TRANSITION_STATUS.ENTERING||this.state.status===d("PolarisTransition.react").TRANSITION_STATUS.EXITING)&&(this.timeoutID=window.setTimeout(function(){return a.setState({active:!0})}))};c.$5=function(a,b){this.setState({status:a,active:!1},b)};c.render=function(){var a=this.props,b=a.children;a.classNames;a=babelHelpers.objectWithoutPropertiesLoose(a,["children","classNames"]);var c=this.$3();return b!=null?h.jsx(d("PolarisTransition.react").Transition,babelHelpers["extends"]({},a,{onEntered:this.$6,onEntering:this.$4,onExited:this.$8,onExiting:this.$7,children:b(c)})):null};return b}(h.Component);a.defaultProps=d("PolarisTransition.react").Transition.defaultProps;g["default"]=a}),98);
__d("PolarisTransitionUtils",["lodash-difference","lodash-memoize","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$1=[];this.$2=new Map();this.getTransitions=c("lodash-memoize")(function(){return b.$1.map(function(a){return c("nullthrows")(b.$2.get(a))})});a!=null&&(this.$1=[].concat(a.$1),this.$2=new Map(a.$2))}var b=a.prototype;b.$3=function(a){var b=this;a.forEach(function(a){b.$2.has(a)||b.$2.set(a,{appear:!1,"in":!0,key:a})})};b.$4=function(a){this.$2.set(a,babelHelpers["extends"]({},this.$2.get(a),{appear:!0,"in":!0}))};b.$5=function(a){this.$2.set(a,babelHelpers["extends"]({},this.$2.get(a),{"in":!1}))};b.$6=function(a){this.$3(a),this.$1=[].concat(a)};b.$7=function(a){var b=this;this.$3(a);var d=this.$1,e=new Set(c("lodash-difference")(a,d)),f=new Set(c("lodash-difference")(d,a));a=[].concat(a);if(f.size>0){d=d.reduce(function(b,c,a){return babelHelpers["extends"]({},b,(b={},b[c]=a,b))},{});var g=0;for(var h=f,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var k;if(i){if(j>=h.length)break;k=h[j++]}else{j=h.next();if(j.done)break;k=j.value}k=k;var l=d[k];a.splice(l+g,0,k);g++}}e.forEach(function(a){return b.$4(a)});f.forEach(function(a){return b.$5(a)});this.$1=a};b.$8=function(a){this.$2["delete"](a),this.$1=this.$1.filter(function(b){return b!==a})};a.create=function(b){var c=new a();c.$6(b);return c};b.update=function(b){var c=new a(this);c.$7(b);return c};b["delete"]=function(b){var c=new a(this);c.$8(b);return c};return a}();g.TransitionManager=a}),98);
__d("PolarisTransitionGroup.react",["PolarisTransitionUtils","nullthrows","react"],(function(a,b,c,d,e,f,g){"use strict";function h(a){a=i(a,"string");return typeof a==="symbol"?a:String(a)}function i(a,b){if(typeof a!=="object"||a===null)return a;var c=a[typeof Symbol==="function"?Symbol.toPrimitive:"@@toPrimitive"];if(c!==void 0){c=c.call(a,b||"default");if(typeof c!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(a)}var j=d("react");a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,e;for(var f=arguments.length,g=new Array(f),i=0;i<f;i++)g[i]=arguments[i];return(b=e=a.call.apply(a,[this].concat(g))||this,e.state={transitions:Object.freeze({}),transitionManager:d("PolarisTransitionUtils").TransitionManager.create(e.props.children!=null?j.Children.map(e.props.children,function(a){return c("nullthrows")(a.key)}):[])},e.$1=function(a){var b=e.state.transitions,c=b[a];b=babelHelpers.objectWithoutPropertiesLoose(b,[a].map(h));e.setState({transitions:b,transitionManager:e.state.transitionManager["delete"](a)});c.props.onExited!=null&&c.props.onExited()},b)||babelHelpers.assertThisInitialized(e)}b.getDerivedStateFromProps=function(a,b){a=a.children!=null?a.children:[];var d=babelHelpers["extends"]({},b.transitions);j.Children.forEach(a,function(a){return d[c("nullthrows")(a.key)]=a});a=j.Children.map(a,function(a){return c("nullthrows")(a.key)});b=b.transitionManager.update(a);return{transitions:d,transitionManager:b}};var e=b.prototype;e.render=function(){var a=this,b=this.state.transitionManager.getTransitions();return b.map(function(b){var c=b.key;b=babelHelpers.objectWithoutPropertiesLoose(b,["key"]);var d=a.state.transitions[c];return j.cloneElement(d,babelHelpers["extends"]({},b,{onExited:function(){return a.$1(c)}}))})};return b}(j.Component);g["default"]=a}),98);
__d("PolarisMobileStories.react",["cx","PolarisCSSTransition.react","PolarisConfig","PolarisMobileStoriesConstants","PolarisRelationshipTypes","PolarisStoriesPageBugNub.react","PolarisStoriesProvider.react","PolarisStoryViewerV2.react","PolarisStyleConstants","PolarisTransitionGroup.react","PolarishasBugNub","PolarisrelationshipSelectors","PolarisstorySelectors","joinClasses","nullthrows","react","react-redux-wwwig"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react"),j=d("react").useEffect,k={enter:"_afa6",enterActive:"_afa7",exit:"_afa8",exitActive:"_afa9"},l={enter:"_afaa",enterActive:"_afab",exit:"_afac",exitActive:"_afad"};function a(a){var b=c("nullthrows")(d("react-redux-wwwig").useSelector(d("PolarisstorySelectors").getTrayEntrypoint)),e=c("nullthrows")(d("react-redux-wwwig").useSelector(d("PolarisstorySelectors").getCurrentReel)),f=c("nullthrows")(d("react-redux-wwwig").useSelector(function(a){return d("PolarisstorySelectors").getReelOwnerForReelId(a,e.id)}));a=d("PolarisStoriesProvider.react").useStoriesContext();var g=a.updateStoriesContext;a=a.animationDirection;var h=d("react-redux-wwwig").useSelector(function(a){return d("PolarisrelationshipSelectors").getRelationship(a.relationships,f.id)})===d("PolarisRelationshipTypes").FOLLOW_STATUS_FOLLOWING;j(function(){b==="story_viewer_list"&&g({isInitiallyFollowedByViewer:h})},[h,b,g]);var m=function(){g({isTransitioning:!0})},n=function(){g({isTransitioning:!1})};if(e==null)return null;a=a===d("PolarisMobileStoriesConstants").AnimationDirections.FORWARD?k:l;return i.jsxs("div",{className:"_afae"+(d("PolarisConfig").isIOS()?" _afaf":""),children:[i.jsx("div",{className:"_afag",children:i.jsx(c("PolarisTransitionGroup.react"),{children:i.jsx(c("PolarisCSSTransition.react"),{classNames:a,onEntered:n,onExited:m,timeout:c("PolarisStyleConstants")["story-swap-animation-duration"].value,children:function(a){a=c("joinClasses").apply(void 0,["_afah"].concat(a));return i.jsx("div",{className:a,children:i.jsx(c("PolarisStoryViewerV2.react"),{isMobile:!0,reelId:e.id})})}},e.id)})}),d("PolarishasBugNub").hasBugNub()&&i.jsx(c("PolarisStoriesPageBugNub.react"),{})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("PolarisMobileStoriesPage.react",["cx","fbt","PolarisAsyncEntityQRModal","PolarisConfig","PolarisFullscreenShell.react","PolarisIGCoreSpinner","PolarisMobileStories.react","PolarisPageIdentifierConstants","PolarisPageMetadata.react","PolarisStoriesProvider.react","PolarisStoryActions","PolarisStoryVideoContext.react","PolarisstorySelectors","PolarisuseDisplayProperties","react","react-redux-wwwig","usePolarisReelNotAvailable"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j=d("react");b=d("react");var k=b.useEffect,l=b.useState,m=i._("Historias");function a(a){var b=a.highlightReelId,e=a.initializing,f=a.needsTapToStart,g=a.showQRModal;a=a.viewerIsLoggedIn;g=l(g);var h=g[0],i=g[1];g=d("react-redux-wwwig").useSelector(d("PolarisstorySelectors").getCurrentReel);var n=d("react-redux-wwwig").useDispatch(),o=d("react-redux-wwwig").useSelector(function(a){return a.displayProperties.orientation}),p=d("react-redux-wwwig").useSelector(function(a){return a.stories.isLoading});p=p===!0||e===!0;e=c("PolarisuseDisplayProperties")();e=e.viewportHeight;k(function(){return function(){n(d("PolarisStoryActions").navigateFromStory())}},[n]);var q=c("usePolarisReelNotAvailable")(p,g);return q?null:j.jsxs(c("PolarisFullscreenShell.react"),{className:"_aa2j"+(d("PolarisConfig").isIOS()?" _aa2k":""),deviceOrientation:o,style:{height:e},children:[j.jsx(c("PolarisPageMetadata.react"),{id:c("PolarisPageIdentifierConstants").StoriesPage,title:m}),p!==!0?j.jsxs(j.Fragment,{children:[j.jsx(d("PolarisStoriesProvider.react").StoriesContextProvider,{initialState:{needsTapToStart:f,viewerIsLoggedIn:a},children:j.jsx(d("PolarisStoryVideoContext.react").StoryVideoContextProvider,{children:j.jsx(c("PolarisMobileStories.react"),{})})}),h&&j.jsx(c("PolarisAsyncEntityQRModal"),{entityID:(q=b==null?void 0:b.toString())!=null?q:g==null?void 0:(o=g.itemIds)==null?void 0:o[0],onClose:function(){return i(!1)},source:"DIRECT_NAVIGATION"})]}):j.jsx(c("PolarisIGCoreSpinner"),{color:"light",position:"absolute",size:"medium"})]})}a.displayName=a.name+" [from "+f.id+"]";g.PAGE_ID=c("PolarisPageIdentifierConstants").StoriesPage;g.MobileStoriesPage=a}),98);