if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("MemoryLoggerBase",["CurrentUser","MemoryLoggerConfigWebSitevarConfig","MemoryUtils","ODS","URI","gkx","ifRequired","performanceNow","regeneratorRuntime","requireDeferred","requireWeak","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=c("requireDeferred")("LogWebMemoryUsageFalcoEvent").__setRef("MemoryLoggerBase"),i;c("requireWeak")("AdsAccountStore",function(a){i=a});var j=c("CurrentUser").getAppID(),k=c("MemoryLoggerConfigWebSitevarConfig").measurement_interval_minutes*60*1e3,l=10*1e3,m,n=-1,o=-1,p=-1,q=-1,r=null,s=-1,t=null,u=-1;function v(){t||c("ifRequired")("InteractionTracingMetrics",function(a){t=a.getInteractionStat()})}function w(){t||v();return t?t.interactionCount:0}var x=c("gkx")("5525")?function(){u<0&&c("ifRequired")("AdsAccountInsightsStore",function(a){a=a.getLastThirtyDaysSpend().getValue();a!=null&&(u=a)});return u}:function(){return-1},y=c("gkx")("5525")?function(){var a;return(a=(a=i)==null?void 0:a.getSelectedAccountID())!=null?a:"0"}:function(){return"0"};function z(){return Math.max(l,-Math.log(Math.random())*k)}function A(){var a=z();c("setTimeoutAcrossTransitions")(function(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(C());case 2:A();case 3:case"end":return a.stop()}},null,this)},a)}function B(a){a=new(c("URI"))(a);var b=a.getQueryData();b=b.ref;a.setFragment("").setQueryData({ref:b});return a.toString()}function C(){var a,e,f,g,i,k,l,t,u,v,z,A,C,D,E,F;return b("regeneratorRuntime").async(function(G){while(1)switch(G.prev=G.next){case 0:a=B(document.URL);e=d("MemoryUtils").getCurrentMemory();f=e.usedJSHeapSize;g=null;if(!d("MemoryUtils").isMeasureMemoryOriginTrialSupported()){G.next=9;break}G.next=7;return b("regeneratorRuntime").awrap(window.performance.measureMemory());case 7:i=G.sent,g=i.bytes;case 9:k=null;l=null;t=URL._fbRegisteredObjectURL;if(typeof t==="function"){u=t();k=u.length;l=0;for(v=0;v<u.length;v++)z=u[v],z.type==="Blob"&&(l=(l||0)+z.size)}A=c("performanceNow")();C=Math.round(A/(1e3*60));D=w();E=x();F=y();h.onReady(function(b){b.log(function(){return{app_id:j,accurate_js_heap_size:g!=null?String(g):null,previous_uri:r,unrevoked_url_count:k!=null?String(k):null,unrevoked_memory_blob:l!=null?String(l):null,current_uri:a,minute:String(C),previous_used_js_heap_size:String(s),used_js_heap_size:String(f),navigation_count:String(n),news_feed_count:String(o),news_feed_story_position:String(p),news_feed_story_position_offset:String(q),ad_spend_30:String(E),interaction_count:String(D),script_path:m,ad_account_id:String(F)}})});case 19:case"end":return G.stop()}},null,this)}a={init:function(a){m=a.scriptPath;if(k<=0)return;if(d("MemoryUtils").isMemoryAPISupported()){a=d("MemoryUtils").isMeasureMemoryOriginTrialSupported()?"experimental":"hit";d("ODS").bumpEntityKey(2966,"browser_memory_logger",a);A()}else d("ODS").bumpEntityKey(2966,"browser_memory_logger","miss")},setNavigationCount:function(a){n=a},setNewsFeedCount:function(a){o=a},setNewsFeedStoryPosition:function(a){c("gkx")("1026")&&(p=a)},setNewsFeedStoryPositionOffset:function(a){c("gkx")("1026")&&(q=a)},setPreviousUri:function(a){r=B(a)},setPreviousUsedJSHeapSize:function(a){s=a},setScriptPath:function(a){m=a},getCurrentUsedJSHeapSize:function(){var a=d("MemoryUtils").getCurrentMemory();return(a=a.usedJSHeapSize)!=null?a:-1}};e=a;g["default"]=e}),98);
__d("ScriptPath",["ErrorGuard","SubscriptionList","TimeSlice","WebStorage","isInIframe"],(function(a,b,c,d,e,f){"use strict";var g,h,i="sp_pi",j=1e3*30,k=null,l=null,m=new(b("SubscriptionList"))(),n=null,o=[],p=b("TimeSlice").guard(function(a,c){m.getCallbacks().forEach(function(d){(g||(g=b("ErrorGuard"))).applyWithGuard(function(){d({source:k,dest:l,cause:a,extraData:c})},null,[])})},"ScriptPath Notifying callbacks",{propagationType:b("TimeSlice").PropagationType.ORPHAN});function q(){return l?l.scriptPath:void 0}function r(){var a=(h||(h=b("WebStorage"))).getSessionStorage();if(!a||b("isInIframe")())return;h.setItemGuarded(a,i,JSON.stringify({pageInfo:l,clickPoint:n,time:Date.now()}))}function a(){var a=(h||(h=b("WebStorage"))).getSessionStorageForRead();if(!a)return;var c=a.getItem(i);if(c){c=JSON.parse(c);c&&(c.time<Date.now()-j&&(a=(h||(h=b("WebStorage"))).getSessionStorage(),a&&a.removeItem(i)),l=c.pageInfo,n=c.clickPoint,l&&(l.restored=!0))}}a();c={set:function(a,b,c){k=l,l={scriptPath:a,categoryToken:b,extraData:c||{}},o=[],window._script_path=a,p()},openOverlayView:function(a,b,c){if(!a)return;var d=o.length;(d===0||o[d-1]!==a)&&(k=babelHelpers["extends"]({},l),l&&(l.topViewEndpoint=a),c&&c.replaceTopOverlay&&d>0?(o[d-1]=a,p("replace_overlay_view",b)):(o.push(a),p("open_overlay_view",b)))},closeOverlayView:function(a,b){a=o.lastIndexOf(a);if(a===-1)return;k=babelHelpers["extends"]({},l);l&&(a>0?l.topViewEndpoint=o[a-1]:l.topViewEndpoint=null);o=o.slice(0,a);p("close_overlay_view",b)},setClickPointInfo:function(a){n=a,r()},getClickPointInfo:function(){return n},getScriptPath:q,getCategoryToken:function(){return l?l.categoryToken:void 0},getEarlyFlushPage:function(){var a;return(a=l)==null?void 0:(a=a.extraData)==null?void 0:a.ef_page},getTopViewEndpoint:function(){var a=o.length;return a>0?o[a-1]:q()},getPageInfo:function(){return l},getSourcePageInfo:function(){return k},subscribe:function(a){return m.add(b("TimeSlice").guard(a,"ScriptPath.subscribe"))},shutdown:function(){r()}};e.exports=c}),null);
__d("MemoryLogger",["MemoryLoggerBase","NavigationMetrics","ScriptPath"],(function(a,b,c,d,e,f,g){var h=!1,i=0;a={init:function(a){var b=this;if(h)return;h=!0;c("MemoryLoggerBase").init({scriptPath:d("ScriptPath").getScriptPath()});d("ScriptPath").subscribe(function(){c("MemoryLoggerBase").setScriptPath(d("ScriptPath").getScriptPath())});c("NavigationMetrics").addListener(c("NavigationMetrics").Events.NAVIGATION_DONE,function(a,c){b.incrementNavigationCount(i)})},setPreviousUri:function(a){c("MemoryLoggerBase").setPreviousUri(a)},incrementNavigationCount:function(){c("MemoryLoggerBase").setNavigationCount(++i)}};b=a;g["default"]=b}),98);